# ğŸ—ï¸ ODIN DeFi System - é¡¹ç›®æ–‡ä»¶ç»“æ„è¯¦ç»†è¯´æ˜

## ğŸ“ é¡¹ç›®æ ¹ç›®å½•æ¦‚è§ˆ

```
/Users/park/code/Massa/massa-defi-buildathon-latest/
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“ assembly/        # AssemblyScriptæ™ºèƒ½åˆçº¦æºç 
â”œâ”€â”€ ğŸ“ build/          # ç¼–è¯‘åçš„WASMåˆçº¦æ–‡ä»¶
â”œâ”€â”€ ğŸ“ frontend/       # Reactå‰ç«¯åº”ç”¨
â”œâ”€â”€ ğŸ“ src/           # TypeScriptéƒ¨ç½²å’Œå·¥å…·è„šæœ¬
â””â”€â”€ ğŸ“„ æ–‡æ¡£æ–‡ä»¶
```

---

## ğŸ” è¯¦ç»†æ–‡ä»¶ç»“æ„

### 1. ğŸ“ **assembly/** - æ™ºèƒ½åˆçº¦æ ¸å¿ƒä»£ç 

```
assembly/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ ğŸ“„ MainController.ts      # â­ ä¸»æ§åˆ¶å™¨ (åŒ…å«æ‰€æœ‰ç­–ç•¥ç®¡ç†åŠŸèƒ½)
â”‚   â”œâ”€â”€ ğŸ“„ ObservationThread.ts   # è§‚å¯Ÿçº¿ç¨‹åˆçº¦
â”‚   â”œâ”€â”€ ğŸ“„ main.ts               # åˆçº¦å…¥å£ç‚¹
â”‚   â”œâ”€â”€ ğŸ“„ types.ts              # ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ algorithms/              # äº¤æ˜“ç­–ç•¥ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MeanReversionStrategy.ts     # Mean Reversionç­–ç•¥å®ç°
â”‚   â”‚   â””â”€â”€ ğŸ“„ PracticalMarketDetector.ts   # å¸‚åœºæ£€æµ‹ç®—æ³•
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StrategyManager.ts          # ç­–ç•¥ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ StateManager.ts             # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ ğŸ“„ SimpleEnhancedController.ts # å¢å¼ºæ§åˆ¶å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ market/                  # å¸‚åœºç›¸å…³åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ ğŸ“„ VirtualMarketGenerator.ts   # è™šæ‹Ÿå¸‚åœºç”Ÿæˆå™¨
â”‚   â”‚
â”‚   â””â”€â”€ utils/                   # å·¥å…·ç±»
â”‚       â””â”€â”€ ğŸ“„ Result.ts         # ç»“æœç±»å‹å¤„ç†
â”‚
â””â”€â”€ __tests__/                   # æµ‹è¯•æ–‡ä»¶
```

#### ğŸ”‘ å…³é”®æ–‡ä»¶è¯´æ˜ï¼š

- **MainController.ts**: åŒ…å«æ‰€æœ‰æ–°åŠŸèƒ½çš„ä¸»åˆçº¦
  - `switchStrategy()` - ç­–ç•¥åˆ‡æ¢
  - `getActiveStrategy()` - è·å–å½“å‰æ´»è·ƒç­–ç•¥
  - `generateMarketData()` - ç”Ÿæˆè™šæ‹Ÿå¸‚åœºæ•°æ®
  - `interactWithVirtualMarket()` - ä¸è™šæ‹Ÿå¸‚åœºäº¤äº’

---

### 2. ğŸ“ **frontend/** - Reactå‰ç«¯åº”ç”¨

```
frontend/
â”œâ”€â”€ ğŸ“„ package.json              # å‰ç«¯ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ index.html               # HTMLå…¥å£
â”œâ”€â”€ ğŸ“„ vite.config.ts           # Viteæ„å»ºé…ç½®
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ ğŸ“„ addresses.json       # åˆçº¦åœ°å€é…ç½®
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ ğŸ“„ App.tsx              # â­ ä¸»åº”ç”¨ç»„ä»¶ (åŒ…å«æ‰€æœ‰UI)
    â”œâ”€â”€ ğŸ“„ main.tsx            # Reactåº”ç”¨å…¥å£
    â”œâ”€â”€ ğŸ“„ types.ts            # TypeScriptç±»å‹å®šä¹‰
    â”‚
    â”œâ”€â”€ assets/                # é™æ€èµ„æº
    â”‚   â”œâ”€â”€ ğŸ–¼ï¸ odin-logo-h.svg
    â”‚   â”œâ”€â”€ ğŸ–¼ï¸ odin-logo-v.svg
    â”‚   â””â”€â”€ ğŸ–¼ï¸ massa-logo.jpeg
    â”‚
    â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
        â”œâ”€â”€ ğŸ“„ contractInteraction.ts  # åˆçº¦äº¤äº’å°è£…
        â””â”€â”€ ğŸ“„ massaWallet.ts         # é’±åŒ…è¿æ¥åŠŸèƒ½
```

#### ğŸ¨ **App.tsx æ–‡ä»¶å†…å®¹ç»“æ„** (2000+ è¡Œ):

1. **å¯¼å…¥å’Œæ ·å¼å®šä¹‰** (1-862è¡Œ)
   - styled-componentsæ ·å¼ç»„ä»¶
   - åŠ¨ç”»å®šä¹‰
   - å…¨å±€æ ·å¼

2. **è™šæ‹Ÿå¸‚åœºç›‘æ§ç»„ä»¶** (863-1267è¡Œ)
   - `VirtualMarketMonitor` ç»„ä»¶
   - `PriceChart` ä»·æ ¼å›¾è¡¨ç»„ä»¶
   - å®æ—¶æ•°æ®æ›´æ–°é€»è¾‘

3. **ä¸»åº”ç”¨ç»„ä»¶** (1268-2011è¡Œ)
   - é’±åŒ…è¿æ¥é€»è¾‘
   - é¡µé¢è·¯ç”±æ§åˆ¶
   - Portfolioå±•ç¤º
   - ç­–ç•¥ç®¡ç†ç•Œé¢

#### ğŸ” **UIç»„ä»¶ä½ç½®**:

- **Portfolioå¡ç‰‡**: 1873-1936è¡Œ
  - Portfolio 1 (Multi-thread Attention)
  - Portfolio 2 (Mean Reversion)
  
- **ç­–ç•¥æ˜¾ç¤º**: 1979-2008è¡Œ
  - Active Strategieséƒ¨åˆ†
  - "Multi-threaded Attention" æ–‡å­—åœ¨1984è¡Œ
  
- **è™šæ‹Ÿå¸‚åœºç›‘æ§é¡µé¢**: 984-1266è¡Œ
  - ä»·æ ¼å›¾è¡¨
  - å®æ—¶äº¤æ˜“æ´»åŠ¨
  - ASCæ€§èƒ½æŒ‡æ ‡

---

### 3. ğŸ“ **src/** - éƒ¨ç½²å’Œå·¥å…·è„šæœ¬

```
src/
â”œâ”€â”€ ğŸ“„ deploy-step1.ts          # åŸå§‹éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ ğŸ“„ deploy-updated.ts        # æ›´æ–°çš„éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ ğŸ“„ test-strategies.ts       # ç­–ç•¥æµ‹è¯•è„šæœ¬
â”œâ”€â”€ ğŸ“„ control.ts              # åˆçº¦æ§åˆ¶å‘½ä»¤
â”œâ”€â”€ ğŸ“„ check-balance.ts        # ä½™é¢æ£€æŸ¥å·¥å…·
â””â”€â”€ ğŸ“„ utils.ts               # é€šç”¨å·¥å…·å‡½æ•°
```

---

### 4. ğŸ“„ **é‡è¦é…ç½®æ–‡ä»¶**

```
æ ¹ç›®å½•/
â”œâ”€â”€ ğŸ“„ .env                    # ç¯å¢ƒå˜é‡ (ç§é’¥ã€ç½‘ç»œé…ç½®)
â”œâ”€â”€ ğŸ“„ addresses.json          # åˆçº¦åœ°å€æ˜ å°„
â”œâ”€â”€ ğŸ“„ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ ğŸ“„ asconfig.json          # AssemblyScriptç¼–è¯‘é…ç½®
â””â”€â”€ ğŸ“„ tsconfig.json          # TypeScripté…ç½®
```

#### ğŸ“ **åˆçº¦åœ°å€** (addresses.json):
```json
{
  "step1": {
    "main": "AS18YYFWEHL2EVGdj26jRV9dF2W3ykmWy2n9JwRUPL8mFLYR1St3",
    "threads": [...]
  }
}
```

---

### 5. ğŸ“š **æ–‡æ¡£æ–‡ä»¶**

```
æ–‡æ¡£/
â”œâ”€â”€ ğŸ“„ DEPLOYMENT_STATUS.md           # éƒ¨ç½²çŠ¶æ€è¯¦æƒ…
â”œâ”€â”€ ğŸ“„ é¡¹ç›®æ–‡ä»¶ç»“æ„è¯¦ç»†è¯´æ˜.md         # æœ¬æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ Step1å‰ç«¯ç•Œé¢è¯¦ç»†è¯´æ˜æ–‡æ¡£.md    # UIè¯´æ˜
â”œâ”€â”€ ğŸ“„ ç³»ç»Ÿæ„æˆä¸åŠŸèƒ½è¯´æ˜.md           # ç³»ç»Ÿæ¶æ„
â””â”€â”€ ğŸ“„ CLAUDE.md                      # å·¥ç¨‹æŒ‡å—
```

---

## ğŸ¯ å¿«é€Ÿå®šä½æŒ‡å—

### éœ€è¦ä¿®æ”¹UIæ–‡æœ¬ï¼Ÿ
â†’ ç¼–è¾‘ `frontend/src/App.tsx`

### éœ€è¦ä¿®æ”¹åˆçº¦é€»è¾‘ï¼Ÿ
â†’ ç¼–è¾‘ `assembly/contracts/MainController.ts`

### éœ€è¦æ›´æ–°åˆçº¦åœ°å€ï¼Ÿ
â†’ ç¼–è¾‘ `addresses.json` å’Œ `frontend/public/addresses.json`

### éœ€è¦æ·»åŠ æ–°ç­–ç•¥ï¼Ÿ
1. åœ¨ `assembly/contracts/algorithms/` åˆ›å»ºæ–°ç­–ç•¥æ–‡ä»¶
2. åœ¨ `MainController.ts` ä¸­é›†æˆ
3. åœ¨ `App.tsx` ä¸­æ·»åŠ UIæ”¯æŒ

### éœ€è¦éƒ¨ç½²åˆçº¦ï¼Ÿ
â†’ è¿è¡Œ `npm run deploy-step1` æˆ– `npx tsx src/deploy-updated.ts`

### éœ€è¦æµ‹è¯•åŠŸèƒ½ï¼Ÿ
â†’ è¿è¡Œ `npx tsx src/test-strategies.ts`

---

## ğŸš€ å¼€å‘å·¥ä½œæµ

1. **ä¿®æ”¹åˆçº¦** â†’ `assembly/contracts/` â†’ è¿è¡Œ `npm run build`
2. **éƒ¨ç½²åˆçº¦** â†’ è¿è¡Œéƒ¨ç½²è„šæœ¬ â†’ æ›´æ–° `addresses.json`
3. **æ›´æ–°å‰ç«¯** â†’ ä¿®æ”¹ `App.tsx` â†’ å‰ç«¯è‡ªåŠ¨çƒ­é‡è½½
4. **æµ‹è¯•åŠŸèƒ½** â†’ ä½¿ç”¨ `control.ts` æˆ–å‰ç«¯ç•Œé¢

---

## ğŸ“Š å½“å‰ç³»ç»ŸçŠ¶æ€

- âœ… **MainController**: å·²éƒ¨ç½²ï¼ŒåŒ…å«æ‰€æœ‰ç­–ç•¥åŠŸèƒ½
- âœ… **å‰ç«¯é›†æˆ**: å®Œæ•´çš„é’±åŒ…è¿æ¥å’Œç­–ç•¥ç›‘æ§
- âœ… **å®æ—¶ç›‘æ§**: è™šæ‹Ÿå¸‚åœºæ•°æ®å¯è§†åŒ–
- âœ… **ç­–ç•¥åˆ‡æ¢**: Multi-thread Attention & Mean Reversion

---

*æ›´æ–°æ—¶é—´: 2025-01-28*
*é¡¹ç›®ä½ç½®: /Users/park/code/Massa/massa-defi-buildathon-latest*